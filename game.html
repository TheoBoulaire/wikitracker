<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>WikiTracker</title>
        <meta name="description" content="" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="icon" type="image/svg" href="logoW.svg">
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6"
            crossorigin="anonymous"
        />
        <link href="style/custom.css" rel="stylesheet" />
        <script
            src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf"
            crossorigin="anonymous"
        ></script>
        <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
    </head>
    <body>
        <div id="app">
            <header class="container-fluid sticky-top border-bottom border-secondary border-2">
                <div class="row fs-2">
                    <div class="col-2 fs-2">
                        <span id="wt-time" class="badge text-white align-text-bottom">
                            {{ timeDisplay }}
                        </span>
                        <span id="wt-distance" class="badge text-white align-text-bottom">{{ distance + ((length > 0) ? " / " + length : "") }}</span>
                        <!--
                        <button type="button" class="btn btn-secondary">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-arrow-left-right" viewBox="0 0 16 16">
                                <path fill-rule="evenodd" d="M1 11.5a.5.5 0 0 0 .5.5h11.793l-3.147 3.146a.5.5 0 0 0 .708.708l4-4a.5.5 0 0 0 0-.708l-4-4a.5.5 0 0 0-.708.708L13.293 11H1.5a.5.5 0 0 0-.5.5zm14-7a.5.5 0 0 1-.5.5H2.707l3.147 3.146a.5.5 0 1 1-.708.708l-4-4a.5.5 0 0 1 0-.708l4-4a.5.5 0 1 1 .708.708L2.707 4H14.5a.5.5 0 0 1 .5.5z"></path>
                            </svg>
                        </button>
                        -->
                    </div>
                    <div class="col-10">
                        <nav style="--bs-breadcrumb-divider: '>';" aria-label="breadcrumb">
                            <ol class="breadcrumb">
                                <li class="breadcrumb-item" v-bind:class="{ active: pos === 0, 'text-primary': pos !== 0 }" v-on:click="pos = 0;" v-on:keydown="navBreadCrumbWithKeyboard($event, 0)" tabindex="0" aria-current="page">
                                    {{ start.label }}
                                </li>
                                <li v-for="(step, index) in track" class="breadcrumb-item" v-bind:class="{ active: pos === index + 1, 'text-primary': pos !== index + 1 }" v-on:click="pos = index + 1;" v-on:keydown="navBreadCrumbWithKeyboard($event, index + 1)" tabindex="0">
                                    {{ step.item.label }}
                                </li>
                                <li v-if="!achieved" class="breadcrumb-item text-secondary">
                                    •••
                                </li>
                                <li v-if="!achieved" class="breadcrumb-item text-secondary">
                                    {{ goal.label }}
                                </li>
                            </ol>
                        </nav>
                    </div>
                </div>
            </header>
            <main class="container">
                <div v-if="errors.length > 0" class="alert alert-danger" role="alert">
                    <h2 class="alert-heading">Erreur</h2>
                    <p v-for="error of errors" class="fs-5">
                        {{ error }}
                    </p>
                </div>
                <div v-if="achieved" class="alert alert-success" role="alert">
                    <p class="fs-5">
                        {{
                            "\""
                                + start.label.charAt(0).toUpperCase() + start.label.slice(1)
                                + track.map(step => ", " + step.property.label + " " + step.item.label).reduce((acc, val) => acc + val)
                                + (language === "fr" ? "\" est un chemin sémantique." : "\" is a semantic path.")
                        }}
                    </p>
                </div>
                <div v-if="forward" class="fs-5">
                    <div v-for="(choice, index) in choices" v-on:click="choose($event, index)" v-on:keydown="chooseWithKeyboard($event, index)" class="row rounded wt-choice" tabindex="0">
                        <div class="col-4 text-secondary text-truncate text-end" :aria-label="choice.property.label">
                            {{ 
                                choice.property.order === 0 ?
                                    choice.property.label: 
                                    (
                                        choice.property.order === 1 ?
                                            "├":
                                            "└"
                                    ) + "─"
                            }}
                        </div>
                        <div class="col-8 text-primary text-truncate text-start">
                            {{ choice.item.label }}
                        </div>
                    </div>
                </div>
                <div v-else class="fs-5">
                    <div v-for="(choice, index) in choices" v-on:click="choose($event, index)" v-on:keydown="chooseWithKeyboard($event, index)" class="row rounded wt-choice" tabindex="0">
                        <div class="col-4 text-primary text-truncate text-end">
                            {{ choice.item.label }}
                        </div>
                        <div class="col-8 text-secondary text-truncate text-start">
                            {{ 
                                choice.property.order === 0 ?
                                    ("─┬ " + choice.property.label): 
                                    "─" + (
                                        choice.property.order === 1 ?
                                            "┤":
                                            "┘"
                                    )
                            }}
                        </div>
                    </div>
                </div>
                <div class="progress bg-transparent fixed-bottom" v-bind:class="{ invisible: choicesLoadingProgress < 1 }">
                    <div class="progress-bar progress-bar-striped" role="progressbar" v-bind:style="choicesLoadingBarWidth" v-bind:aria-valuenow="choicesLoadingProgress" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
            </main>
            <!-- <div id="timer">
                <span v-if="hours > 0">{{ hours }}<span class="unit">h</span></span><span v-if="hours > 0 || minutes > 0">{{ minutes }}<span class="unit">m</span></span>{{ seconds }}<span class="unit">s</span></span>
            </div>
            <div id="counter">
                {{ distance }}<span class="unit"> sauts</span>
            </div> -->
        </div>
        <script src="scripts/app.js"></script>
    </body>
</html>